% ctex-class-defs.sty: definitions for ctex document class files (not in style files)

% font size definitions

\ifCTEX@sfoursize
  \renewcommand\normalsize{% 12bp
    \@setfontsize\normalsize{\CTEX@fs@sfour}{\CTEX@fs@sfourskip}%
    \abovedisplayskip 12\p@ \@plus3\p@ \@minus7\p@
    \abovedisplayshortskip \z@ \@plus3\p@
    \belowdisplayshortskip 6.5\p@ \@plus3.5\p@ \@minus3\p@
    \belowdisplayskip \abovedisplayskip
    \let\@listi\@listI}
  \normalsize
  \renewcommand\small{% 10.5bp
    \@setfontsize\small{\CTEX@fs@five}{\CTEX@fs@fiveskip}%
    \abovedisplayskip 11\p@ \@plus3\p@ \@minus6\p@
    \abovedisplayshortskip \z@ \@plus3\p@
    \belowdisplayshortskip 6.5\p@ \@plus3.5\p@ \@minus3\p@
    \def\@listi{\leftmargin\leftmargini
                \topsep 9\p@ \@plus3\p@ \@minus5\p@
                \parsep 4.5\p@ \@plus2\p@ \@minus\p@
                \itemsep \parsep}%
    \belowdisplayskip \abovedisplayskip}
  \renewcommand\footnotesize{% 9bp
    \@setfontsize\footnotesize{\CTEX@fs@sfive}{\CTEX@fs@sfiveskip}%
    \abovedisplayskip 10\p@ \@plus2\p@ \@minus5\p@
    \abovedisplayshortskip \z@ \@plus3\p@
    \belowdisplayshortskip 6\p@ \@plus3\p@ \@minus3\p@
    \def\@listi{\leftmargin\leftmargini
                \topsep 6\p@ \@plus2\p@ \@minus2\p@
                \parsep 3\p@ \@plus2\p@ \@minus\p@
                \itemsep \parsep}%
    \belowdisplayskip \abovedisplayskip}
  \renewcommand\scriptsize{% 7.5bp
    \@setfontsize\scriptsize{\CTEX@fs@six}{\CTEX@fs@sixskip}}
  \renewcommand\tiny{% 6.5bp
    \@setfontsize\tiny{\CTEX@fs@ssix}{\CTEX@fs@ssixskip}}
  \renewcommand\large{% 15bp
    \@setfontsize\large{\CTEX@fs@sthree}{\CTEX@fs@sthreeskip}}
  \renewcommand\Large{% 18bp
    \@setfontsize\Large{\CTEX@fs@stwo}{\CTEX@fs@stwoskip}}
  \renewcommand\LARGE{% 22bp
    \@setfontsize\LARGE{\CTEX@fs@two}{\CTEX@fs@twoskip}}
  \renewcommand\huge{% 24bp
    \@setfontsize\huge{\CTEX@fs@sone}{\CTEX@fs@soneskip}}
  \renewcommand\Huge{% 26bp
    \@setfontsize\Huge{\CTEX@fs@one}{\CTEX@fs@oneskip}}
\fi
\ifCTEX@fivesize
  \renewcommand\normalsize{% 10.5bp
    \@setfontsize\normalsize{\CTEX@fs@five}{\CTEX@fs@fiveskip}%
    \abovedisplayskip 10\p@ \@plus2\p@ \@minus5\p@
    \abovedisplayshortskip \z@ \@plus3\p@
    \belowdisplayshortskip 6\p@ \@plus3\p@ \@minus3\p@
    \belowdisplayskip \abovedisplayskip
    \let\@listi\@listI}
  \normalsize
  \renewcommand\small{% 9bp
    \@setfontsize\small{\CTEX@fs@sfive}{\CTEX@fs@sfiveskip}%
    \abovedisplayskip 8.5\p@ \@plus3\p@ \@minus4\p@
    \abovedisplayshortskip \z@ \@plus2\p@
    \belowdisplayshortskip 4\p@ \@plus2\p@ \@minus2\p@
    \def\@listi{\leftmargin\leftmargini
                \topsep 4\p@ \@plus2\p@ \@minus2\p@
                \parsep 2\p@ \@plus\p@ \@minus\p@
                \itemsep \parsep}%
    \belowdisplayskip \abovedisplayskip}
  \renewcommand\footnotesize{% 7.5bp
    \@setfontsize\footnotesize{\CTEX@fs@six}{\CTEX@fs@sixskip}%
    \abovedisplayskip 6\p@ \@plus2\p@ \@minus4\p@
    \abovedisplayshortskip \z@ \@plus\p@
    \belowdisplayshortskip 3\p@ \@plus\p@ \@minus2\p@
    \def\@listi{\leftmargin\leftmargini
                \topsep 3\p@ \@plus\p@ \@minus\p@
                \parsep 2\p@ \@plus\p@ \@minus\p@
                \itemsep \parsep}%
    \belowdisplayskip \abovedisplayskip}
  \renewcommand\scriptsize{% 6.5bp
    \@setfontsize\scriptsize{\CTEX@fs@ssix}{\CTEX@fs@ssixskip}}
  \renewcommand\tiny{% 5.5bp
    \@setfontsize\tiny{\CTEX@fs@seven}{\CTEX@fs@sevenskip}}
  \renewcommand\large{% 12bp
    \@setfontsize\large{\CTEX@fs@sfour}{\CTEX@fs@sfourskip}}
  \renewcommand\Large{% 15bp
    \@setfontsize\Large{\CTEX@fs@sthree}{\CTEX@fs@sthreeskip}}
  \renewcommand\LARGE{% 18bp
    \@setfontsize\LARGE{\CTEX@fs@stwo}{\CTEX@fs@stwoskip}}
  \renewcommand\huge{% 22bp
    \@setfontsize\huge{\CTEX@fs@two}{\CTEX@fs@twoskip}}
  \renewcommand\Huge{% 26bp
    \@setfontsize\Huge{\CTEX@fs@one}{\CTEX@fs@oneskip}}
\fi

% section format

\def\CTEX@defsecformat#1{%
  \expandafter\def\csname CTEX@pre#1\endcsname{}%
  \expandafter\def\csname CTEX@post#1\endcsname{}%
  \expandafter\def\csname CTEX@the#1\endcsname{%
    \csname the#1\endcsname}%
  \expandafter\def\csname CTEXthe#1\endcsname{%
    \csname CTEX@pre#1\endcsname%
    \csname CTEX@the#1\endcsname%
    \csname CTEX@post#1\endcsname}%
  \expandafter\def\csname CTEX@#1@format\endcsname{}%
  \expandafter\def\csname CTEX@#1@nameformat\endcsname{}%
  \expandafter\def\csname CTEX@#1@numberformat\endcsname{}%
  \expandafter\def\csname CTEX@#1@aftername\endcsname{}%
  \expandafter\def\csname CTEX@#1@titleformat\endcsname{}
  \expandafter\def\csname CTEX@#1name\endcsname{%
    \csname CTEX@#1@nameformat\endcsname%
    \csname CTEX@pre#1\endcsname%
    \begingroup%
    \csname CTEX@#1@numberformat\endcsname%
    \csname CTEX@the#1\endcsname%
    \endgroup%
    \csname CTEX@post#1\endcsname%
    \csname CTEX@#1@aftername\endcsname}%
  \expandafter\def\csname CTEX@#1@beforeskip\endcsname{}%
  \expandafter\def\csname CTEX@#1@afterskip\endcsname{}%
  \expandafter\def\csname CTEX@#1@indent\endcsname{}%
}
\CTEX@defsecformat{part}
\CTEX@defsecformat{chapter}
\CTEX@defsecformat{section}
\CTEX@defsecformat{subsection}
\CTEX@defsecformat{subsubsection}
\CTEX@defsecformat{paragraph}
\CTEX@defsecformat{subparagraph}

% Default caption name definitions

\def\CTEX@contentsname{Contents}
\def\CTEX@listfigurename{List of Figures}
\def\CTEX@listtablename{List of Tables}
\def\CTEX@figurename{Figure}
\def\CTEX@tablename{Table}
\def\CTEX@abstractname{Abstract}
\def\CTEX@indexname{Index}
\def\CTEX@bibname{Bibliography}
\renewcommand*\contentsname{\CTEX@contentsname}
\renewcommand*\listfigurename{\CTEX@listfigurename}
\renewcommand*\listtablename{\CTEX@listtablename}
\renewcommand*\figurename{\CTEX@figurename}
\renewcommand*\tablename{\CTEX@tablename}
\@ifundefined{abstractname}{}{
  \renewcommand*\abstractname{\CTEX@abstractname}}
\renewcommand*\partname{\CTEX@thepart}
\@ifundefined{chaptername}{}{
  \renewcommand*\chaptername{\CTEX@thechapter}}
\renewcommand*\appendixname{\CTEX@appendixname}
\renewcommand*\indexname{\CTEX@indexname}

\def\CTEX@setsecname#1[#2,#3]{%
  \expandafter\def\csname CTEX@pre#1\endcsname{#2}%
  \expandafter\def\csname CTEX@post#1\endcsname{\ignorespaces#3}}
\def\CTEX@setsecnumber#1[#2]{%
  \expandafter\def\csname CTEX@the#1\endcsname{#2}}
\def\CTEX@setsecformat#1#2[#3]{%
  \expandafter\def\csname CTEX@#1@#2\endcsname{#3}}
\def\CTEX@addsecformat#1#2[#3]{%
  \expandafter\let\expandafter\reserved@a\csname CTEX@#1@#2\endcsname%
  \expandafter\expandafter\expandafter\def\expandafter\expandafter%
    \csname CTEX@#1@#2\endcsname\expandafter{\reserved@a#3}}
\def\CTEX@defseckey#1{%
  \CTEX@subkey{#1}{name}{\CTEX@setsecname{#1}[##1]}%
  \CTEX@subkey{#1}{number}{\CTEX@setsecnumber{#1}[##1]}%
  \CTEX@subkey{#1}{format}{\CTEX@setsecformat{#1}{format}[##1]}%
  \CTEX@subkey{#1}{format+}{\CTEX@addsecformat{#1}{format}[##1]}%
  \CTEX@subkey{#1}{nameformat}{\CTEX@setsecformat{#1}{nameformat}[##1]}%
  \CTEX@subkey{#1}{nameformat+}{\CTEX@addsecformat{#1}{nameformat}[##1]}%
  \CTEX@subkey{#1}{numberformat}{\CTEX@setsecformat{#1}{numberformat}[##1]}%
  \CTEX@subkey{#1}{numberformat+}{\CTEX@addsecformat{#1}{numberformat}[##1]}%
  \CTEX@subkey{#1}{aftername}{\CTEX@setsecformat{#1}{aftername}[##1]}%
  \CTEX@subkey{#1}{aftername+}{\CTEX@addsecformat{#1}{aftername}[##1]}%
  \CTEX@subkey{#1}{titleformat}{\CTEX@setsecformat{#1}{titleformat}[##1]}%
  \CTEX@subkey{#1}{titleformat+}{\CTEX@addsecformat{#1}{titleformat}[##1]}%
  \CTEX@subkey{#1}{beforeskip}{\CTEX@setsecformat{#1}{beforeskip}[##1]}%
  \CTEX@subkey{#1}{afterskip}{\CTEX@setsecformat{#1}{afterskip}[##1]}%
  \CTEX@subkey{#1}{indent}{\CTEX@setsecformat{#1}{indent}[##1]}%
}
\CTEX@defseckey{part}
\CTEX@defseckey{chapter}
\CTEX@defseckey{section}
\CTEX@defseckey{subsection}
\CTEX@defseckey{subsubsection}
\CTEX@defseckey{paragraph}
\CTEX@defseckey{subparagraph}
\CTEX@subkey{appendix}{name}{\def\CTEX@appendixname{#1}}
\CTEX@subkey{appendix}{number}{\def\CTEX@appendixnumber{#1}}
\CTEX@key{contentsname}{\def\CTEX@contentsname{#1}}
\CTEX@key{listfigurename}{\def\CTEX@listfigurename{#1}}
\CTEX@key{listtablename}{\def\CTEX@listtablename{#1}}
\CTEX@key{figurename}{\def\CTEX@figurename{#1}}
\CTEX@key{tablename}{\def\CTEX@tablename{#1}}
\CTEX@key{abstractname}{\def\CTEX@abstractname{#1}}
\CTEX@key{indexname}{\def\CTEX@indexname{#1}}
\CTEX@key{bibname}{\def\CTEX@bibname{#1}}

% caption delimiter

\def\CTEX@caption@delimiter{: }
\long\def\@makecaption#1#2{%
  \vskip\abovecaptionskip
  \sbox\@tempboxa{#1\CTEX@caption@delimiter #2}%
  \ifdim \wd\@tempboxa >\hsize
    #1\CTEX@caption@delimiter #2\par
  \else
    \global \@minipagefalse
    \hb@xt@\hsize{\hfil\box\@tempboxa\hfil}%
  \fi
  \vskip\belowcaptionskip}
\CTEX@key{captiondelimiter}{\CTEX@setcaptiondelimiter{#1}}
\newcommand*\CTEX@setcaptiondelimiter[1]{%
  \def\CTEX@caption@delimiter{#1}}

\endinput

