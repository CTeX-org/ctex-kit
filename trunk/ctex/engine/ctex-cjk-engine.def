% ctex-cjk-engine.def: for LaTeX engine with CJK
% vim:ft=tex

\ifCTEX@encoding{GBK}
  {\RequirePackage{CJK}[2003/03/28]}
  {\RequirePackage{CJKutf8}[2003/03/28]}

\ifbool{CTEX@punct}
  {\RequirePackage{CJKpunct}[2009/05/06]}{}

\ifbool{CTEX@space}{%
    \def\CTEX@CJKenv{CJK}%
    \let\CTEX@tilde\empty
  }{%
    \def\CTEX@CJKenv{CJK*}%
    \def\CTEX@tilde{\CJKtilde}%
  }

\def\CTEX@beginCJK{%
  \begin{\CTEX@CJKenv}{\CTEX@encoding}{\CJKfamilydefault}%
  \CTEX@tilde}
\def\CTEX@endCJK{\clearpage\end{\CTEX@CJKenv}}

\AtEndOfPackage{\CJK@makeActive}

\let\CTEX@begindocumenthook\@begindocumenthook
\let\CTEX@enddocumenthook\@enddocumenthook
\def\AtBeginDocument{\g@addto@macro\CTEX@begindocumenthook}
\def\AtEndDocument{\g@addto@macro\CTEX@enddocumenthook}
\def\@begindocumenthook{\CTEX@begindocumenthook\CTEX@beginCJK}
\def\@enddocumenthook{\CTEX@endCJK\CTEX@enddocumenthook}

\def\CJKfamilydefault{\CJKrmdefault}

\providecommand*\CJKrmdefault{gbsn}
\providecommand*\CJKsfdefault{gbsn}
\providecommand*\CJKttdefault{gbsn}

\protected\appto\rmfamily{\CJKfamily{\CJKrmdefault}}
\protected\appto\sffamily{\CJKfamily{\CJKsfdefault}}
\protected\appto\ttfamily{\CJKfamily{\CJKttdefault}}
\protected\appto\normalfont{\CJKfamily{\CJKfamilydefault}}

\endinput
