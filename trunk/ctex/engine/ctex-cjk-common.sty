% ctex-cjk-common.sty: common definitions shared by ctex-cjk-engine.sty
% and ctex-xetex-engine.sty

\ifCTEX@fntef
  \RequirePackage{CJKfntef}
  \normalem
\fi

\def\CTEXspace{\CJKspace}
\def\CTEXnospace{\CJKnospace}

\newcommand*{\songti}{\CJKfamily{song}} % 宋体
\newcommand*{\heiti}{\CJKfamily{hei}}   % 黑体
\newcommand*{\kaishu}{\CJKfamily{kai}}  % 楷书
\newcommand*{\fangsong}{\CJKfamily{fs}} % 仿宋
\newcommand*{\lishu}{\CJKfamily{li}}    % 隶书
\newcommand*{\youyuan}{\CJKfamily{you}} % 幼圆

\let\CTEX@save@set@fontsize\set@fontsize
\def\set@fontsize#1#2#3{%
  \CTEX@save@set@fontsize{#1}{#2}{#3}%
  \CTEXsetfont}
\newcommand*\ziju[1]{% 字距
  \settowidth\@tempdima{\CTEX@spaceChar}%
  \renewcommand{\CJKglue}{\hskip #1\@tempdima}%
  \CTEXsetfont}
\newdimen\ccwd % 字宽
\newcommand*\CTEXsetfont{%
  \settowidth\ccwd{\CTEX@spaceChar\CJKglue}%
  \ifdim\parindent=0pt\else\parindent2\ccwd\fi}
\ifCTEX@fntef
  \def\CTEXunderdot{\CJKunderdot}
  \def\CTEXunderline{\CJKunderline}
  \def\CTEXunderdblline{\CJKunderdblline}
  \def\CTEXunderwave{\CJKunderwave}
  \def\CTEXsout{\CJKsout}
  \def\CTEXxout{\CJKxout}
  \def\CTEXfilltwosides{\CJKfilltwosides}
  \def\endCTEXfilltwosides{\endCJKfilltwosides}
  \CTEX@replacecommand{CTEX}{CJK}{underdotbasesep}
  \CTEX@replacecommand{CTEX}{CJK}{underdotsep}
  \CTEX@replacecommand{CTEX}{CJK}{underlinebasesep}
  \CTEX@replacecommand{CTEX}{CJK}{underlinesep}
  \CTEX@replacecommand{CTEX}{CJK}{underdbllinebasesep}
  \CTEX@replacecommand{CTEX}{CJK}{underdbllinesep}
  \CTEX@replacecommand{CTEX}{CJK}{underwavebasesep}
  \CTEX@replacecommand{CTEX}{CJK}{underwavesep}
  \CTEX@replacecommand{CTEX}{CJK}{southeight}
  \CTEX@replacecommand{CTEX}{CJK}{underdotcolor}
  \CTEX@replacecommand{CTEX}{CJK}{underwavecolor}
  \CTEX@replacecommand{CTEX}{CJK}{underlinecolor}
  \CTEX@replacecommand{CTEX}{CJK}{underdbllinecolor}
  \CTEX@replacecommand{CTEX}{CJK}{soutcolor}
  \CTEX@replacecommand{CTEX}{CJK}{xoutcolor}
\fi
\let\CTEX@save@rmfamily\rmfamily
\renewcommand*\rmfamily{\CTEX@save@rmfamily\CJKfamily{rm}}
\let\CTEX@save@sffamily\sffamily
\renewcommand*\sffamily{\CTEX@save@sffamily\CJKfamily{sf}}
\let\CTEX@save@ttfamily\ttfamily
\renewcommand*\ttfamily{\CTEX@save@ttfamily\CJKfamily{tt}}
\let\CTEX@save@normalfont\normalfont
\renewcommand*\normalfont{\CTEX@save@normalfont\CJKfamily{rm}}

\endinput

