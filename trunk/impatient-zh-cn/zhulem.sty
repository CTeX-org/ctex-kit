%	zhulem.sty	coded by YIN Dian
%	Fix compatibility problem with ulem
%	Hist:	070822	Changed \UL@reskip and \UL@@penalty, able to work.
\NeedsTeXFormat{LaTeX2e}[1996/12/01]
\def\fileversion{0.4}
\def\filedate{2007/08/22}
\ProvidesPackage{zhulem}[\filedate\space\fileversion]
\RequirePackage{ulem}[2000/05/26]
%\let\zhulem@printfont\zhs@printf@nt
\def\zhulem@printfont#1{}
\def\UL@reskip{\zhs@savef@nt{tmp}\UL@stop \zhulem@printfont{tmp}\UL@leaders
  \UL@start\zhs@restoref@nt{tmp}}
\def\UL@@penalty{\LA@penalty \ifnum\count@=\z@
  \@ne \else \count@ \fi % zero penalty => no penalty, so use 1 instead.
  \zhs@savef@nt{tmp}\UL@stop \zhulem@printfont{tmp}\UL@start
  \zhs@restoref@nt{tmp}}

\endinput
