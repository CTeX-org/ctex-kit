#summary CTeX 宏包中的编码问题
#labels Phase-Implementation,Phase-Design

XeTeX 默认使用 UTF-8 编码，CJK 方式默认使用 GBK 编码。引擎使用 ifxetex 自动判断。

对于 CJK 方式，用户可以手工加 UTF8 选项，效果和使用 ctexutf8 一样。事实上多余的 GBK 选项也可用。

对于 XeTeX 方式，用户需要手工加 \XeTeXinputencoding 命令。

中文 pdf 书签乱码的问题，仅在使用 CJK 方式，GBK 编码的时候有可能出现。如果使用 dvipdfmx 引擎，可以通过使用

{{{
    \AtBeginDvi{\special{pdf:tounicode GBK-EUC-UCS2}}
}}}

这样的命令直接解决（用户很可能这样，比如示例文件就是这样做的）。因此只有 pdfTeX（包括 latex/pdflatex）、CJK 方式、GBK 编码，需要使用 gbk2uni 处理 foo.out 文件。

此外 hyperref 宏包的正确选项在不同的编译方式下差别也不小。